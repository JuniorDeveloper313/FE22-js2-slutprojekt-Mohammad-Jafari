const e=document.querySelector(".create-post button"),t=document.querySelector(".create-post input"),a=localStorage.getItem("myProfile"),n=a?JSON.parse(a):null,s=localStorage.getItem("img"),r=s?JSON.parse(s):null,o=document.querySelector(".posts"),i=document.querySelector(".user"),l=document.querySelector(".all-user");let c;const d=document.querySelector(".delete button");async function m(){o.innerHTML="";const e=await fetch("https://social-media-bebf1-default-rtdb.europe-west1.firebasedatabase.app/posts.json"),t=await e.json();Object.values(t).sort(((e,t)=>{const a=new Date(t.createdAt),n=new Date(e.createdAt);return a.getTime()-n.getTime()})).map((e=>{const t=r[Number(e.img)];let a=`\n                <div class="post">\n                <div class="user-profile">\n                <h6>${e.name}</h6>\n                <img src="${t}" style="width: 50px"\n                    alt="">\n            </div>\n            <p>\n                 ${e.msg}\n            </p>\n                </div>\n            `;o.innerHTML+=a}))}e?.addEventListener("click",(()=>{let e={msg:t.value,name:n.name,img:n.img,createdAt:(new Date).toISOString()};fetch("https://social-media-bebf1-default-rtdb.europe-west1.firebasedatabase.app/posts.json",{method:"POST",body:JSON.stringify(e)}).then((()=>{m()}))})),d.addEventListener("click",(()=>{let e=Object.values(c);Object.values(e).map(((e,t)=>{var a;e.name===n.name&&(a=Object.keys(c)[t],fetch(`https://social-media-bebf1-default-rtdb.europe-west1.firebasedatabase.app/users/${a}.json`,{method:"DELETE"}).then((()=>{localStorage.removeItem("myProfile"),window.location.assign("../index.html")})))}))})),async function(){const e=await fetch("https://social-media-bebf1-default-rtdb.europe-west1.firebasedatabase.app/users.json"),t=await e.json();c=t;let a=Object.values(t);Object.values(a).map(((e,a)=>{const n=r[Number(e.img)];let s=`\n            <div class="user" style="border: 1px solid; padding: 1rem">\n                <a href="./profile.html?id=${Object.keys(t)[a]}&name=${e.name}" >\n                <h6>${e.name}</h6>\n                <img src="${n}" style="width:50px"\n                    alt="">\n                </a>\n            </div>\n        `;l.innerHTML+=s}))}(),function(){const e=r[Number(n.img)];let t=`\n    <h3>${n.name}</h3>\n                    <img src="${e}" style="width: 40px"\n                        alt="">\n    `;i.innerHTML+=t}(),m();
//# sourceMappingURL=dashboard.cafe5145.js.map
