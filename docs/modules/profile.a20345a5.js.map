{"mappings":"AAQA,MAAMA,EAAW,IAAIC,gBAAgBC,SAASC,QACxCC,EAAKJ,EAASK,WAAWC,MAAM,KAAK,GAGpCC,EAAoBC,SAASC,cAAc,SAE3CC,EAAeF,SAASC,cAAc,QACtCE,EAAOC,aAAaC,QAAQ,OAC5BC,EAAaH,EAAOI,KAAKC,MAAML,GAAQ,KAEvCM,EAAiBT,SAASC,cAAc,WAe9CS,iBACI,MAAMC,QAAYC,MAAM,wFAClBC,QAAcF,EAAIG,OAGOC,OAAOC,OAAOH,GAEjBI,MAAK,CAACC,EAAGC,KACjC,MAAMC,EAAQ,IAAIC,KAAKF,EAAEG,WACnBC,EAAQ,IAAIF,KAAKH,EAAEI,WACzB,OAAOF,EAAMI,UAAYD,EAAMC,SAAO,IAGlCC,KAAKC,IACT,GAAIA,EAAKC,OAASnC,EAASK,WAAWC,MAAM,KAAK,GAAI,CACjD,IAAI8B,EAAK,wBACAF,EAAKG,wBAEdpB,EAAgBqB,WAAaF,CACjC,IAER,CAGAG,GApCArB,iBACI,MAAMC,QAAYC,MAAM,mFAAmFhB,EAAGE,MAAM,KAAK,WACnHkC,QAAarB,EAAIG,OAEvBf,EAAkBkC,YAAc,SAAWD,EAAKL,KAChD,IAAIO,EAAMlC,SAASmC,cAAc,OACjCD,EAAIE,IAAM9B,EAAW+B,OAAOL,EAAKE,MACjCA,EAAII,MAAMC,MAAQ,OAClBrC,GAAcsC,OAAON,EACzB,CA4BAO","sources":["src/modules/profile.ts"],"sourcesContent":["\r\ntype msgType = {\r\n    msg: String,\r\n    name: String,\r\n    img: Number,\r\n    createdAt: Date,\r\n}\r\n\r\nconst idParams = new URLSearchParams(location.search);\r\nconst id = idParams.toString().split('=')[1]; // Ta ut den id parameter på URL för att sedan hämtar information från databasen\r\n\r\n\r\nconst nameTextContainer = document.querySelector('.name') as HTMLElement;\r\n\r\nconst imgContainer = document.querySelector('.img');\r\nconst imgs = localStorage.getItem('img');\r\nconst parsedImgs = imgs ? JSON.parse(imgs) : null;\r\n\r\nconst postsContainer = document.querySelector('.posts');\r\n\r\n\r\nasync function showUser() { // Lista ut användaren baserat på parameteravärdet\r\n    const res = await fetch(`https://social-media-bebf1-default-rtdb.europe-west1.firebasedatabase.app/users/${id.split('&')[0]}.json`);\r\n    const user = await res.json();\r\n\r\n    nameTextContainer.textContent = \"Name: \" + user.name;\r\n    let img = document.createElement('img');\r\n    img.src = parsedImgs[Number(user.img)];\r\n    img.style.width = \"60px\"\r\n    imgContainer?.append(img);\r\n}\r\n\r\n\r\nasync function showPosts() {\r\n    const res = await fetch(`https://social-media-bebf1-default-rtdb.europe-west1.firebasedatabase.app/posts.json`);\r\n    const posts = await res.json();\r\n\r\n\r\n    let convertedData: msgType[] = Object.values(posts);\r\n\r\n    let newData = convertedData.sort((a, b) => { // visa det senaste meddelandet.\r\n        const bDate = new Date(b.createdAt);\r\n        const aDate = new Date(a.createdAt);\r\n        return bDate.getTime() - aDate.getTime();\r\n    });\r\n\r\n    newData.map((post) => {\r\n        if (post.name === idParams.toString().split('=')[2]) { // Kontrollera om användaren matchar med parametervärdet-url för att få den användare vi har klickat på\r\n            let el = `\r\n                <p>${post.msg}</p>\r\n            `\r\n            postsContainer!.innerHTML += el;\r\n        }\r\n    })\r\n}\r\n\r\n \r\nshowPosts()\r\nshowUser()"],"names":["$c5272c87d5623534$var$idParams","URLSearchParams","location","search","$c5272c87d5623534$var$id","toString","split","$c5272c87d5623534$var$nameTextContainer","document","querySelector","$c5272c87d5623534$var$imgContainer","$c5272c87d5623534$var$imgs","localStorage","getItem","$c5272c87d5623534$var$parsedImgs","JSON","parse","$c5272c87d5623534$var$postsContainer","async","res","fetch","posts","json","Object","values","sort","a","b","bDate","Date","createdAt","aDate","getTime","map","post","name","el","msg","innerHTML","$c5272c87d5623534$var$showPosts","user","textContent","img","createElement","src","Number","style","width","append","$c5272c87d5623534$var$showUser"],"version":3,"file":"profile.a20345a5.js.map"}