{"mappings":"AAeAA,aAAaC,QAAQ,MAAOC,KAAKC,UANlB,CACX,+HACA,+HACA,0IAKJ,MAAMC,EAAWC,SAASC,eAAe,gBACnCC,EAAcF,SAASC,eAAe,mBACtCE,EAAmBH,SAASC,eAAe,qBAC3CG,EAAmBJ,SAASC,eAAe,qBAE3CI,EAAgBL,SAASC,eAAe,YACxCK,EAAgBN,SAASC,eAAe,YAG9CC,GAAaK,iBAAiB,SAAS,KACnCC,MAAM,wFACDC,MAAMC,GAAQA,EAAIC,SAClBF,MAAMG,IACH,MAAMC,EAAaD,EAAOE,OAAOC,OAAOH,GAAMI,MAAMC,GAAOA,EAAGC,OAASf,EAAiBgB,QAAS,KAC3FC,EAAMpB,SAASqB,cAAc,8BACnC,GAAIR,EAAY,OAAOS,MAAM,uBAC7B,IAAKF,EAAK,OAAOE,MAAM,2BAEvB,IAAIC,EAAU,CACVL,KAAMf,EAAiBgB,MACvBK,SAAUpB,EAAiBe,MAC3BC,IAAKA,EAAID,MACTM,GAAIC,KAAKC,OAGbnB,MAAM,uFAAwF,CAC1FoB,OAAQ,OACRC,KAAMhC,KAAKC,UAAUyB,KAGzB5B,aAAaC,QAAQ,YAAaC,KAAKC,UAAUyB,IACjDO,YAAW,KACPC,OAAOC,SAASC,KAAO,6BACxB,OACP,IAMRlC,GAAUQ,iBAAiB,SAAU2B,IACjCA,EAAEC,iBACF3B,MAAM,wFACDC,MAAMC,GAAQA,EAAIC,SAClBF,MAAMG,IAGH,MAAMwB,EAAOxB,EAAOE,OAAOC,OAAQH,GAAOyB,QAAQD,GAASA,EAAKlB,OAASb,EAAcc,OAASiB,EAAKZ,WAAalB,EAAca,QAAS,GACrIiB,EAAKE,OAAS,GACd3C,aAAaC,QAAQ,YAAaC,KAAKC,UAAUsC,EAAK,KACtDN,YAAW,KACPC,OAAOC,SAASC,KAAO,6BACxB,MAEHX,MAAM,mCAEd","sources":["src/index.ts"],"sourcesContent":["\r\n\r\ntype User = {\r\n    id: Number,\r\n    name: String,\r\n    password: String,\r\n    img: Number\r\n}\r\n\r\nlet pictures = [\r\n    \"https://st2.depositphotos.com/5934840/44231/v/600/depositphotos_442314078-stock-illustration-young-afro-teenager-boy-kid.jpg\",\r\n    \"https://st2.depositphotos.com/5934840/44231/v/600/depositphotos_442315370-stock-illustration-young-teenager-boy-kid-head.jpg\",\r\n    \"https://st5.depositphotos.com/13803186/64986/v/600/depositphotos_649866560-stock-illustration-head-boy-smiling-friendly-greeting.jpg\"\r\n]\r\n\r\nlocalStorage.setItem('img', JSON.stringify(pictures))\r\n\r\nconst loginBtn = document.getElementById('submit-login');\r\nconst registerBtn = document.getElementById('submit-register');\r\nconst usernameRegister = document.getElementById('username-register') as HTMLInputElement;\r\nconst passwordRegister = document.getElementById('password-register') as HTMLInputElement;\r\n\r\nconst usernameLogin = document.getElementById('username') as HTMLInputElement;\r\nconst passwordLogin = document.getElementById('password') as HTMLInputElement;\r\n\r\n\r\nregisterBtn?.addEventListener('click', () => {\r\n    fetch('https://social-media-bebf1-default-rtdb.europe-west1.firebasedatabase.app/users.json')\r\n        .then((res) => res.json())\r\n        .then((data: User[]) => {\r\n            const isUserExit = data ? Object.values(data).some((el) => el.name === usernameRegister.value) : null; // kontrollera om användare finns i databasen\r\n            const img = document.querySelector('input[name=\"bild\"]:checked')! as HTMLSelectElement;\r\n            if (isUserExit) return alert('User already exists');\r\n            if (!img) return alert('Please choose a picture');\r\n\r\n            let dataObj = {\r\n                name: usernameRegister.value,\r\n                password: passwordRegister.value,\r\n                img: img.value,\r\n                id: Date.now()\r\n            }\r\n\r\n            fetch('https://social-media-bebf1-default-rtdb.europe-west1.firebasedatabase.app/users.json', {  // skicka en POST-förfrågan för att lägga till data i Firebase\r\n                method: \"POST\",\r\n                body: JSON.stringify(dataObj),\r\n            });\r\n\r\n            localStorage.setItem('myProfile', JSON.stringify(dataObj));\r\n            setTimeout(() => {\r\n                window.location.href = './modules/dashboard.html'\r\n            }, 1000)\r\n        });\r\n\r\n})\r\n\r\n\r\n\r\nloginBtn?.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    fetch('https://social-media-bebf1-default-rtdb.europe-west1.firebasedatabase.app/users.json') // skicka en GET-förfrågan för att hämta data från Firebase\r\n        .then((res) => res.json())\r\n        .then((data: User[]) => {\r\n            \r\n            // kontrollera om användarens lösenord och användarnamn matchar i databasen \r\n            const user = data ? Object.values((data)).filter((user) => user.name === usernameLogin.value && user.password === passwordLogin.value) : [];\r\n            if (user.length > 0) { // om det matchar får användaren är loggad in\r\n                localStorage.setItem('myProfile', JSON.stringify(user[0]));\r\n                setTimeout(() => {\r\n                    window.location.href = './modules/dashboard.html'\r\n                }, 1000)\r\n            } else {\r\n                alert('User or password not correct!')\r\n            }\r\n        });\r\n})"],"names":["localStorage","setItem","JSON","stringify","$b4e14b6b8da86996$var$loginBtn","document","getElementById","$b4e14b6b8da86996$var$registerBtn","$b4e14b6b8da86996$var$usernameRegister","$b4e14b6b8da86996$var$passwordRegister","$b4e14b6b8da86996$var$usernameLogin","$b4e14b6b8da86996$var$passwordLogin","addEventListener","fetch","then","res","json","data","isUserExit","Object","values","some","el","name","value","img","querySelector","alert","dataObj","password","id","Date","now","method","body","setTimeout","window","location","href","e","preventDefault","user","filter","length"],"version":3,"file":"index.97622e54.js.map"}